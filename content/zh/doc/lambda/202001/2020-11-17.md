---
title: "日记2020-11-17"
linkTitle: "日记2020-11-17"
description: "日记2020-11-17"
author: denalon
date: 2020-11-17T09:01:40+08:00
url: /web/chip/2020111714html
---

### cloudflare的kv存储免费计划

![kv存储免费计划](https://base.oribos.city/images/2020/11/2020111701.png)

Cloudflare Workers简单地说就是一个可以让你运行Javascript的平台，因为它免费，不需要域名，不需要维护服务器，在线率高。最简单的例子就是通过使用以下代码显示一个普通html页面


```
const html = `<!DOCTYPE html>
<body>
  <h1>Hello World</h1>
  <p>This markup was generated by a Cloudflare Worker.</p>
</body>`

async function handleRequest(request) {
  return new Response(html, {
    headers: {
      "content-type": "text/html;charset=UTF-8",
    },
  })
}

addEventListener("fetch", event => {
  return event.respondWith(handleRequest(event.request))
})

```

其他使用workers的方法可以通过[Examples](https://developers.cloudflare.com/workers/examples) 获得。

workers有免费计划，包括 100,000 个请求/天 。然后令人意外的是，cloudflare也将kv存储加入免费计划（之前使用kv存储需要5美元/月)。这样workers可以做的事情就多了。

比如使用workers不但可以部署一个静态页面，还能部署一个静态网站。

### wrangler

npm安装wrangler

```
npm i @cloudflare/wrangler -g
```

然后使用`wrangler login` 登录，`wrangler config`配置api-key，通过`wrangler publish`部署

通过[教程](https://developers.cloudflare.com/workers/cli-wrangler)进一步了解使用wrangler