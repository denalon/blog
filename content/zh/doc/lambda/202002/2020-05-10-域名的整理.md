---
title: "2020 05 10 域名的整理"
date: 2020-05-10T09:37:45+08:00
draft: false
url: /web/deploy/2020/2020051001.html
---

#### .app域名可以由cloudflare解析

由于cloudflare既有域名解析服务,又能提供cdn服务,交由cloudflare解析的域名可以自动使用ssl证书,那么注册的.app就可以使用cloudflare自动管理证书文件.之前.app由于证书注册和使用不方便一直没有正常使用,现在交由cloudflare解析相当方便轻松。

#### .app域名无法备案

.app域名仅在cloudflare上使用,解析海外服务,github pages等服务。


### .ufs.im 作为workers 路由域名

由cloudflare解析的ufs.im暂时作为workers的路由域名，负责部署在workers上的内容和功能链接。



### 在github上运行持续集成


自动使用hugo生成public

```
name: Deploy Hugo Site to Github Pages on Master Branch

on:
  push:
    branches:
      - master

jobs:
  build-deploy:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1  # v2 does not have submodules option now
       # with:
       #   submodules: true

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: '0.62.2'
          # extended: true

      - name: Build
        run: hugo --minify

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          deploy_key: ${{ secrets.ACTIONSDEPLOYKEY }} # 这里的 ACTIONS_DEPLOY_KEY 则是上面设置 Private Key的变量名
          external_repository: denalon/denalon.github.io # Pages 远程仓库 
          publish_dir: "/deploy/public"
          keep_files: false # remove existing files
          publish_branch: master  # deploying branch
          commit_message: ${{ github.event.head_commit.message }}

```


git镜像到其他仓库

```
name: 'GitHub Actions Mirror'

on: [push, delete]

jobs:
  mirror_to_gitlab:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout'
        uses: actions/checkout@v1
      - name: 'Mirror to gitlab'
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url:
            git@gitlab.com:denalon/pages.git
          ssh_private_key:
            ${{ secrets.PAGES }}
```

更换目录名

```
name: Deploy Hugo Site to Github Pages on Master Branch

on:
  push:
    branches:
      - master

jobs:
  build-deploy:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1  # v2 does not have submodules option now
       # with:
       #   submodules: true

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: '0.62.2'
          # extended: true

      - name: Build
        run: hugo --minify

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          deploy_key: ${{ secrets.DEPLOY }} # 这里的 ACTIONS_DEPLOY_KEY 则是上面设置 Private Key的变量名
          external_repository: denalon/deploy # Pages 远程仓库 
          publish_dir: "/deploy"
          keep_files: false # remove existing files
          publish_branch: master  # deploying branch
          commit_message: ${{ github.event.head_commit.message }}

```
