---
author: denalon
title: "在coding构建计划里使用凭证"
date: 2020-07-07T09:01:40+08:00
url: /web/note/2020/2020070711.html
description: 在coding构建计划里使用凭证
---

### 代码如下：

```
      stage('改写ssh') {
        steps {
          sh 'ls -a'
          sh 'mkdir -p ~/.ssh'
          withCredentials([ sshUserPrivateKey(credentialsId:'8f0ccd51-1927-45f2-be05-3d8a600d725e',keyFileVariable:'SSH')
                                                          ]) {
            sh 'cat ${SSH} > ~/.ssh/id_rsa'
          }

          sh 'chmod 600 ~/.ssh/id_rsa'
        }
      }
```

### 步骤演示

录入凭证
![](https://cdn.jsdelivr.net/gh/denalon/gh-3/image/2020070704.png)

在构建计划里使用凭证

![](https://cdn.jsdelivr.net/gh/denalon/gh-3/image/2020070701.png)


![](https://cdn.jsdelivr.net/gh/denalon/gh-3/image/2020070702.png)

![](https://cdn.jsdelivr.net/gh/denalon/gh-3/image/2020070703.png)

