---
title: 新增frp服务器
author: denalon
type: post
date: 2019-10-22T03:45:06+00:00
url: /web/raw/2019102203.html
---


为群晖NAS和本地服务器增加frp服务，以直接开通web访问。域名使用已经备案都网站域名。只负责二级域名对博客的内容补充和后端计算。 

新增的nas域名初步设置为 

web.ufs.pub 群晖nas上的web服务

nabase.oribos.city 群晖nas管理界面

m.ufs.pub 群晖图片应用服务

## 开始安装 

<pre class="wp-block-code"><code># 下载frp可执行包
wget https://github.com/fatedier/frp/releases/download/v0.27.0/frp_0.27.0_linux_amd64.tar.gz

# 解压
tar zxf frp_0.27.0_linux_amd64.tar.gz

# 进入文件
cd frp_0.27.0_linux_amd64/
# 修改配置
vi frps.ini 
# 内容如下：
[common]
# tunnel port通信管道
bind_port = 7000
# http和https
vhost_http_port = 80
vhost_https_port = 443
# 连接认证token
#token = 123456

# 子域名
subdomain_host = frp.kioye.cn

# 自定义404 页面，要用绝对路径哦！
custom_404_page = /root/frp_0.27.0_linux_amd64/404.html

# dashboard图形管理页面
dashboard_port = 81 

dashboard_user = admin
dashboard_pwd = admin

# ---设置完成----
# 启动
./frps -c frps.ini
</code></pre>

## 设置frps服务自启动

<pre class="wp-block-code"><code># 创建后台启动模版
vi /etc/systemd/system/frp.service
# 内容如下：
[Unit]
Description=frps
After=network.target

[Service]
ExecStart=/root/frp_0.27.0_linux_amd64/frps -c /root/frp_0.27.0_linux_amd64/frps.ini 

[Install]
WantedBy=multi-user.target


# 启动测试
systemctl start frp.service
# 查看启动状态
systemctl status frp.service
# 开机自启
systemctl enable frp.service</code></pre>